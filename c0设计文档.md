# C0设计

## 词法分析

* 已完成

## 语法分析

* 基础语法
* 汇编生成
* 二进制文本生成

## todo



* 修改可选数量在为零时的问题
*  处理函数表的问题            解决
* 处理下调用输出问题
* 处理参数分析



## 处理范式

```
//只出现在可以直接结束类型的函数位置
auto next = nextToken();
if (!next.has_value())
	return {};
```

## 处理作用域
* 全局变量单独一张表 只检查是否重复声明
  （常量不赋值上阶段直接报错）
* 在函数中，
  * 声明时只检查本作用域是否重复（不能声明常量）
  * 调用阶段先检查是否本阶段变量
    * 是，检查是否初始化（报错否）
    * 否，查全局表，是否初始化
  * 赋值，是否本阶段
    * 是
    * 否 是否全局，是否常量



## 问题

* 全局初值问题
* 变量放表 入栈
  常量直接放表
* 不能在返回类型为`void`的函数中使用有值的返回语句，也不能在非`void`函数中使用无值的返回语句。

## 未定义行为

* 直接调用后置函数 报错
* 初值没给 全部给0
* return 没值 默认给0
* 没return 默认返回0
* scan char 默认截断

## 测试

* 单函数体定义 ok
* loop函数测试 ok
* if函数测试 
* 函数调用测试
* 返回函数测试